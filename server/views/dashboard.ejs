<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Developer Social Admin</title>

  <!-- Bootstrap & Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background-color: #f8f9fc;
    }
    .dashboard-title {
      font-weight: bold;
      color: #4e73df;
    }
    .card {
      border: none;
      border-radius: 1rem;
    }
    .sidebar {
      min-height: 100vh;
    }
    .main-content {
      padding: 2rem;
    }
    .navbar {
      background-color: white !important;
      border-bottom: 1px solid #dee2e6;
    }
    .stat-box {
      background-color: #ffffff;
      padding: 1.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 5px 10px rgba(0,0,0,0.05);
      text-align: center;
    }
    .stat-box h3 {
      font-size: 2rem;
      color: #4e73df;
    }
    .stat-box p {
      margin: 0;
      font-weight: 600;
      color: #6c757d;
    }
  </style>
</head>
<body>

<div class="container-fluid p-0">
  <div class="row g-0">

    <!-- Sidebar -->
    <div class="col-md-3 col-lg-2 bg-dark text-white sidebar p-0">
      <%- include('./layouts/sidebar') %>
    </div>

    <!-- Main Content -->
    <div class="col-md-9 col-lg-10 p-0">
      <!-- Header -->
      <%- include('./layouts/header') %>

      <!-- Page Content -->
      <div class="main-content">
        <div class="text-center mb-4">
          <h4 class="dashboard-title">Developer Social Network Admin Dashboard</h4>
        </div>

        <% if (message && message.length > 0) { %>
          <div class="alert alert-success">
            <%= message[0] %>
          </div>
        <% } %>

        <!-- Stat Cards -->
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="stat-box">
              <h3><%= totalUsers || 0 %></h3>
              <p>Total Users</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="stat-box">
              <h3><%= totalProfiles || 0 %></h3>
              <p>Profiles Created</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="stat-box">
              <h3><%= totalBlocked || 0 %></h3>
              <p>Blocked Users</p>
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div class="row mb-4">
          <div class="col-md-8">
            <div class="card shadow p-4">
              <h5>User Registrations</h5>
              <canvas id="lineChart"></canvas>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card shadow p-4">
              <h5>Tech Skills Distribution</h5>
              <canvas id="skillPieChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <%- include('./layouts/footer') %>
    </div>
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const lineCtx = document.getElementById('lineChart').getContext('2d');
  new Chart(lineCtx, {
    type: 'line',
    data: {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
      datasets: [{
        label: 'New Users',
        data: [3, 5, 4, 6, 7, 9],
        borderColor: '#4e73df',
        backgroundColor: 'rgba(78, 115, 223, 0.1)',
        tension: 0.3
      }]
    }
  });

  const pieCtx = document.getElementById('skillPieChart').getContext('2d');
  new Chart(pieCtx, {
    type: 'doughnut',
    data: {
      labels: ['React', 'Node.js', 'MongoDB', 'Express', 'Other'],
      datasets: [{
        data: [25, 20, 15, 10, 30],
        backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc', '#f6c23e', '#858796']
      }]
    }
  });
</script>
</body>
</html>
